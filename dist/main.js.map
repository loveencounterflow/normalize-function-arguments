{"mappings":"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","sources":["lib/helpers.js","src/helpers.coffee","lib/main.js","src/main.coffee"],"sourcesContent":["(function() {\n  'use strict';\n  var Template, bind_instance_methods, create_validator, debug, get_instance_methods, gnd, help, hide, nameit, new_pod, pod_prototypes, push_at, rpr, set_at, warn,\n    indexOf = [].indexOf;\n\n  //===========================================================================================================\n  // optional                  = Symbol 'optional'\n  pod_prototypes = Object.freeze([null, Object.getPrototypeOf({})]);\n\n  // new_pod                   = -> {}\n  new_pod = function() {\n    return Object.create(null);\n  };\n\n  // #===========================================================================================================\n  // @bind_proto = ( that, f ) -> that::[ f.name ] = f.bind that::\n\n    //===========================================================================================================\n  Template = class Template {\n    //---------------------------------------------------------------------------------------------------------\n    constructor(cfg = null) {\n      var descriptor, name, ref;\n      ref = Object.getOwnPropertyDescriptors(cfg != null ? cfg : {});\n      for (name in ref) {\n        descriptor = ref[name];\n        descriptor = (function() {\n          switch (true) {\n            //...................................................................................................\n            case gnd.function.isa(descriptor.value):\n              return ((descriptor) => {\n                var configurable, get;\n                ({\n                  configurable,\n                  value: get\n                } = descriptor);\n                return {\n                  enumerable: true,\n                  configurable,\n                  get\n                };\n              })(descriptor);\n            //...................................................................................................\n            case gnd.pod.isa(descriptor.value):\n              return ((descriptor) => {\n                var configurable, get, value;\n                ({configurable, value} = descriptor);\n                get = function() {\n                  return new Template(value);\n                };\n                return {\n                  enumerable: true,\n                  configurable,\n                  get\n                };\n              })(descriptor);\n            default:\n              //...................................................................................................\n              return descriptor;\n          }\n        }).call(this);\n        //.....................................................................................................\n        Object.defineProperty(this, name, descriptor);\n      }\n      return void 0;\n    }\n\n  };\n\n  //===========================================================================================================\n  create_validator = function(typename, isa) {\n    /* TAINT `gnd.nonempty_text.validate typename` */\n    /* TAINT `gnd.function.validate isa` */\n    /* TAINT silently accepts truthy, falsy values returned by `isa()`, not only booleans */\n    return function(x) {\n      if (isa(x)) {\n        return x;\n      }\n      throw new TypeError(`Ωnfa___1 validation error: expected a ${typename} got ${rpr(x)}`);\n    };\n  };\n\n  //===========================================================================================================\n  gnd = (function() {\n    var R, type, typename;\n    R = {\n      // boolean:        isa:  ( x ) -> ( x is true ) or ( x is false )\n      //.......................................................................................................\n      function: {\n        isa: function(x) {\n          return (Object.prototype.toString.call(x)) === '[object Function]';\n        }\n      },\n      //.......................................................................................................\n      template: {\n        isa: function(x) {\n          return x instanceof Template;\n        }\n      },\n      //.......................................................................................................\n      pod: {\n        isa: function(x) {\n          var ref;\n          return (x != null) && (ref = Object.getPrototypeOf(x), indexOf.call(pod_prototypes, ref) >= 0);\n        },\n        create: function(...Q) {\n          return Object.assign(new_pod(), ...Q);\n        }\n      },\n      //.......................................................................................................\n      nfa_cfg: {\n        isa: function(x) {\n          if (!gnd.pod.isa(x)) {\n            return false;\n          }\n          if (!gnd.template.isa_optional(x.template)) {\n            return false;\n          }\n          if (!gnd.function.isa_optional(x.isa)) {\n            return false;\n          }\n          if (!gnd.function.isa_optional(x.validate)) {\n            return false;\n          }\n          // return false unless gnd.function.isa_optional x.type\n          return true;\n        },\n        template: {\n          template: null,\n          isa: null,\n          validate: null,\n          type: null\n        }\n      }\n    };\n//.........................................................................................................\n    for (typename in R) {\n      type = R[typename];\n      type.name = typename;\n    }\n    // type.validate = ( x ) -> ...\n    //.........................................................................................................\n    return R;\n  })();\n\n  (() => {    /* TAINT this is more or less `ClearType.Type::create()` */\n    var results, type, typename;\n    results = [];\n    for (typename in gnd) {\n      type = gnd[typename];\n      results.push((function(typename, type) {\n        if (type.template != null) {\n          type.template = new Template(type.template);\n        }\n        if (type.isa != null) {\n          if (type.isa_optional == null) {\n            type.isa_optional = function(x) {\n              return (x == null) || (type.isa(x));\n            };\n          }\n          if (type.validate == null) {\n            type.validate = create_validator(type.name, function(x) {\n              return type.isa(x);\n            });\n          }\n        }\n        return null;\n      })(typename, type));\n    }\n    return results;\n  })();\n\n  //===========================================================================================================\n  hide = (object, name, value) => {\n    return Object.defineProperty(object, name, {\n      enumerable: false,\n      writable: true,\n      configurable: true,\n      value: value\n    });\n  };\n\n  //===========================================================================================================\n  nameit = function(name, f) {\n    Object.defineProperty(f, 'name', {\n      value: name\n    });\n    return f;\n  };\n\n  //===========================================================================================================\n  get_instance_methods = function(instance) {\n    var R, key, method, ref;\n    R = {};\n    ref = Object.getOwnPropertyDescriptors(instance);\n    for (key in ref) {\n      ({\n        value: method\n      } = ref[key]);\n      if (key === 'constructor') {\n        continue;\n      }\n      if (!gnd.function.isa(method)) {\n        continue;\n      }\n      R[key] = method;\n    }\n    return R;\n  };\n\n  //===========================================================================================================\n  bind_instance_methods = function(instance, keep_name = true) {\n    var key, method, ref;\n    ref = get_instance_methods(Object.getPrototypeOf(instance));\n    for (key in ref) {\n      method = ref[key];\n      if (keep_name) {\n        hide(instance, key, nameit(method.name, method.bind(instance)));\n      } else {\n        hide(instance, key, method.bind(instance));\n      }\n    }\n    return null;\n  };\n\n  //===========================================================================================================\n  push_at = function(list, idx, x) {\n    if (!(idx < 0)) {\n      throw new Error(`Ωnfa___7 expected negative number, got ${rpr(idx)}`);\n    }\n    list.splice(Math.max(list.length + idx, 0), 0, x);\n    return list;\n  };\n\n  // #-----------------------------------------------------------------------------------------------------------\n  // pop_at = ( list, idx, x ) ->\n  //   unless idx < 0\n  //     throw new Error \"Ωnfa___8 expected negative number, got #{rpr idx}\"\n  //   unless list.length >= Math.abs idx\n  //     throw new Error \"Ωnfa___9 list too short, got index #{idx} for length of #{list.length}\"\n  //   return ( list.splice idx, 1 )[ 0 ]\n\n  //-----------------------------------------------------------------------------------------------------------\n  set_at = function(list, idx, x) {\n    if (!(idx < 0)) {\n      throw new Error(`Ωnfa__10 expected negative number, got ${rpr(idx)}`);\n    }\n    list[list.length + idx] = x;\n    return x;\n  };\n\n  //===========================================================================================================\n  debug = console.debug;\n\n  help = console.help;\n\n  warn = console.warn;\n\n  rpr = function(x) {\n    return (require('loupe')).inspect(x);\n  };\n\n  //===========================================================================================================\n  // get_instance_methods\n  // pop_at\n  module.exports = {Template, gnd, create_validator, hide, nameit, bind_instance_methods, push_at, set_at, debug, help, warn, rpr};\n\n}).call(this);\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2hlbHBlcnMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQUE7QUFBQSxNQUFBLFFBQUEsRUFBQSxxQkFBQSxFQUFBLGdCQUFBLEVBQUEsS0FBQSxFQUFBLG9CQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxjQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQTtJQUFBLG9CQUFBOzs7O0VBSUEsY0FBQSxHQUE0QixNQUFNLENBQUMsTUFBUCxDQUFjLENBQUUsSUFBRixFQUFVLE1BQU0sQ0FBQyxjQUFQLENBQXNCLENBQUEsQ0FBdEIsQ0FBVixDQUFkLEVBSjVCOzs7RUFNQSxPQUFBLEdBQTRCLFFBQUEsQ0FBQSxDQUFBO1dBQUcsTUFBTSxDQUFDLE1BQVAsQ0FBYyxJQUFkO0VBQUgsRUFONUI7Ozs7OztFQVlNLFdBQU4sTUFBQSxTQUFBLENBQUE7O0lBR0UsV0FBYSxDQUFFLE1BQU0sSUFBUixDQUFBO0FBQ2YsVUFBQSxVQUFBLEVBQUEsSUFBQSxFQUFBO0FBQUk7TUFBQSxLQUFBLFdBQUE7O1FBQ0UsVUFBQTtBQUFhLGtCQUFPLElBQVA7O0FBQUEsaUJBRU4sR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFiLENBQWlCLFVBQVUsQ0FBQyxLQUE1QixDQUZNO3FCQUV1QyxDQUFBLENBQUUsVUFBRixDQUFBLEdBQUE7QUFDMUQsb0JBQUEsWUFBQSxFQUFBO2dCQUFVLENBQUE7a0JBQUUsWUFBRjtrQkFBZ0IsS0FBQSxFQUFPO2dCQUF2QixDQUFBLEdBQWdDLFVBQWhDO0FBQ0EsdUJBQU87a0JBQUUsVUFBQSxFQUFZLElBQWQ7a0JBQW9CLFlBQXBCO2tCQUFrQztnQkFBbEM7Y0FGeUMsQ0FBQSxFQUFFLFlBRnpDOztBQUFBLGlCQU1OLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBUixDQUFpQixVQUFV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QWQsRUFBK0MsQ0FBL0MsRUFBa0QsQ0FBbEQ7QUFDQSxXQUFPO0VBSkMsRUF0SFY7Ozs7Ozs7Ozs7O0VBcUlBLE1BQUEsR0FBUyxRQUFBLENBQUUsSUFBRixFQUFRLEdBQVIsRUFBYSxDQUFiLENBQUE7SUFDUCxNQUFPLEdBQUEsR0FBTSxFQUFiO01BQ0UsTUFBTSxJQUFJLEtBQUosQ0FBVSxDQUFBLHVDQUFBLENBQUEsQ0FBMEMsR0FBQSxDQUFJLEdBQUosQ0FBMUMsQ0FBQSxDQUFWLEVBRFI7O0lBRUEsSUFBSSxDQUFFLElBQUksQ0FBQyxNQUFMLEdBQWMsR0FBaEIsQ0FBSixHQUE0QjtBQUM1QixXQUFPO0VBSkEsRUFySVQ7OztFQTZJQSxLQUFBLEdBQVUsT0FBTyxDQUFDOztFQUNsQixJQUFBLEdBQVUsT0FBTyxDQUFDOztFQUNsQixJQUFBLEdBQVUsT0FBTyxDQUFDOztFQUNsQixHQUFBLEdBQVUsUUFBQSxDQUFFLENBQUYsQ0FBQTtXQUFTLENBQUUsT0FBQSxDQUFRLE9BQVIsQ0FBRixDQUFtQixDQUFDLE9BQXBCLENBQTRCLENBQTVCO0VBQVQsRUFoSlY7Ozs7O0VBbUpBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLENBQ2YsUUFEZSxFQUVmLEdBRmUsRUFHZixnQkFIZSxFQUlmLElBSmUsRUFLZixNQUxlLEVBT2YscUJBUGUsRUFRZixPQVJlLEVBVWYsTUFWZSxFQVdmLEtBWGUsRUFZZixJQVplLEVBYWYsSUFiZSxFQWNmLEdBZGU7QUFuSmpCIiwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIG9wdGlvbmFsICAgICAgICAgICAgICAgICAgPSBTeW1ib2wgJ29wdGlvbmFsJ1xucG9kX3Byb3RvdHlwZXMgICAgICAgICAgICA9IE9iamVjdC5mcmVlemUgWyBudWxsLCAoIE9iamVjdC5nZXRQcm90b3R5cGVPZiB7fSApLCBdXG4jIG5ld19wb2QgICAgICAgICAgICAgICAgICAgPSAtPiB7fVxubmV3X3BvZCAgICAgICAgICAgICAgICAgICA9IC0+IE9iamVjdC5jcmVhdGUgbnVsbFxuXG4jICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyBAYmluZF9wcm90byA9ICggdGhhdCwgZiApIC0+IHRoYXQ6OlsgZi5uYW1lIF0gPSBmLmJpbmQgdGhhdDo6XG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgVGVtcGxhdGVcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbnN0cnVjdG9yOiAoIGNmZyA9IG51bGwgKSAtPlxuICAgIGZvciBuYW1lLCBkZXNjcmlwdG9yIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIGNmZyA/IHt9XG4gICAgICBkZXNjcmlwdG9yID0gc3dpdGNoIHRydWVcbiAgICAgICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICAgICB3aGVuIGduZC5mdW5jdGlvbi5pc2EgZGVzY3JpcHRvci52YWx1ZSAgICB0aGVuIGRvICggZGVzY3JpcHRvciApID0+XG4gICAgICAgICAgeyBjb25maWd1cmFibGUsIHZhbHVlOiBnZXQsIH0gPSBkZXNjcmlwdG9yXG4gICAgICAgICAgcmV0dXJuIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlLCBnZXQsIH1cbiAgICAgICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICAgICB3aGVuIGduZC5wb2QuaXNhICAgICAgZGVzY3JpcHRvci52YWx1ZSAgICB0aGVuIGRvICggZGVzY3JpcHRvciApID0+XG4gICAgICAgICAgeyBjb25maWd1cmFibGUsIHZhbHVlLCB9ID0gZGVzY3JpcHRvclxuICAgICAgICAgIGdldCA9IC0+IG5ldyBUZW1wbGF0ZSB2YWx1ZVxuICAgICAgICAgIHJldHVybiB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZSwgZ2V0LCB9XG4gICAgICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICAgICAgZWxzZVxuICAgICAgICAgIGRlc2NyaXB0b3JcbiAgICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5IEAsIG5hbWUsIGRlc2NyaXB0b3JcbiAgICByZXR1cm4gdW5kZWZpbmVkXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jcmVhdGVfdmFsaWRhdG9yID0gKCB0eXBlbmFtZSwgaXNhICkgLT5cbiAgIyMjIFRBSU5UIGBnbmQubm9uZW1wdHlfdGV4dC52YWxpZGF0ZSB0eXBlbmFtZWAgIyMjXG4gICMjIyBUQUlOVCBgZ25kLmZ1bmN0aW9uLnZhbGlkYXRlIGlzYWAgIyMjXG4gICMjIyBUQUlOVCBzaWxlbnRseSBhY2NlcHRzIHRydXRoeSwgZmFsc3kgdmFsdWVzIHJldHVybmVkIGJ5IGBpc2EoKWAsIG5vdCBvbmx5IGJvb2xlYW5zICMjI1xuICByZXR1cm4gKCB4ICkgLT5cbiAgICByZXR1cm4geCBpZiBpc2EgeFxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IgXCLOqW5mYV9fXzEgdmFsaWRhdGlvbiBlcnJvcjogZXhwZWN0ZWQgYSAje3R5cGVuYW1lfSBnb3QgI3tycHIgeH1cIlxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZ25kID0gZG8gLT5cbiAgUiA9XG4gICAgIyBib29sZWFuOiAgICAgICAgaXNhOiAgKCB4ICkgLT4gKCB4IGlzIHRydWUgKSBvciAoIHggaXMgZmFsc2UgKVxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgZnVuY3Rpb246XG4gICAgICBpc2E6ICAoIHggKSAtPiAoIE9iamVjdDo6dG9TdHJpbmcuY2FsbCB4ICkgaXMgJ1tvYmplY3QgRnVuY3Rpb25dJ1xuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgdGVtcGxhdGU6XG4gICAgICBpc2E6ICAgICggeCApIC0+IHggaW5zdGFuY2VvZiBUZW1wbGF0ZVxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgcG9kOlxuICAgICAgaXNhOiAgICAoIHggKSAtPiB4PyBhbmQgKCBPYmplY3QuZ2V0UHJvdG90eXBlT2YgeCApIGluIHBvZF9wcm90b3R5cGVzXG4gICAgICBjcmVhdGU6ICggUS4uLiApIC0+IE9iamVjdC5hc3NpZ24gbmV3X3BvZCgpLCBRLi4uXG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICBuZmFfY2ZnOlxuICAgICAgaXNhOiAoIHggKSAtPlxuICAgICAgICByZXR1cm4gZmFsc2UgdW5sZXNzIGduZC5wb2QuaXNhIHhcbiAgICAgICAgcmV0dXJuIGZhbHNlIHVubGVzcyBnbmQudGVtcGxhdGUuaXNhX29wdGlvbmFsIHgudGVtcGxhdGVcbiAgICAgICAgcmV0dXJuIGZhbHNlIHVubGVzcyBnbmQuZnVuY3Rpb24uaXNhX29wdGlvbmFsIHguaXNhXG4gICAgICAgIHJldHVybiBmYWxzZSB1bmxlc3MgZ25kLmZ1bmN0aW9uLmlzYV9vcHRpb25hbCB4LnZhbGlkYXRlXG4gICAgICAgICMgcmV0dXJuIGZhbHNlIHVubGVzcyBnbmQuZnVuY3Rpb24uaXNhX29wdGlvbmFsIHgudHlwZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgdGVtcGxhdGU6XG4gICAgICAgIHRlbXBsYXRlOiBudWxsXG4gICAgICAgIGlzYTogICAgICBudWxsXG4gICAgICAgIHZhbGlkYXRlOiBudWxsXG4gICAgICAgIHR5cGU6ICAgICBudWxsXG4gICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgZm9yIHR5cGVuYW1lLCB0eXBlIG9mIFJcbiAgICB0eXBlLm5hbWUgICAgID0gdHlwZW5hbWVcbiAgICAjIHR5cGUudmFsaWRhdGUgPSAoIHggKSAtPiAuLi5cbiAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICByZXR1cm4gUlxuIyMjIFRBSU5UIHRoaXMgaXMgbW9yZSBvciBsZXNzIGBDbGVhclR5cGUuVHlwZTo6Y3JlYXRlKClgICMjI1xuZG8gPT4gZm9yIHR5cGVuYW1lLCB0eXBlIG9mIGduZCB0aGVuIGRvICggdHlwZW5hbWUsIHR5cGUgKSAtPlxuICBpZiB0eXBlLnRlbXBsYXRlPyB0aGVuIHR5cGUudGVtcGxhdGUgPSAoIG5ldyBUZW1wbGF0ZSB0eXBlLnRlbXBsYXRlIClcbiAgaWYgdHlwZS5pc2E/XG4gICAgdW5sZXNzIHR5cGUuaXNhX29wdGlvbmFsPyB0aGVuIHR5cGUuaXNhX29wdGlvbmFsICA9ICggeCApIC0+ICggbm90IHg/ICkgb3IgKCB0eXBlLmlzYSB4IClcbiAgICB1bmxlc3MgdHlwZS52YWxpZGF0ZT8gICAgIHRoZW4gdHlwZS52YWxpZGF0ZSAgICAgID0gY3JlYXRlX3ZhbGlkYXRvciB0eXBlLm5hbWUsICggeCApIC0+IHR5cGUuaXNhIHhcbiAgcmV0dXJuIG51bGxcblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmhpZGUgPSAoIG9iamVjdCwgbmFtZSwgdmFsdWUgKSA9PiBPYmplY3QuZGVmaW5lUHJvcGVydHkgb2JqZWN0LCBuYW1lLFxuICAgIGVudW1lcmFibGU6ICAgZmFsc2VcbiAgICB3cml0YWJsZTogICAgIHRydWVcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB2YWx1ZTogICAgICAgIHZhbHVlXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxubmFtZWl0ID0gKCBuYW1lLCBmICkgLT4gT2JqZWN0LmRlZmluZVByb3BlcnR5IGYsICduYW1lJywgeyB2YWx1ZTogbmFtZSwgfTsgZlxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmdldF9pbnN0YW5jZV9tZXRob2RzID0gKCBpbnN0YW5jZSApIC0+XG4gIFIgICAgICAgICAgICAgPSB7fVxuICBmb3Iga2V5LCB7IHZhbHVlOiBtZXRob2QsIH0gb2YgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgaW5zdGFuY2VcbiAgICBjb250aW51ZSBpZiBrZXkgaXMgJ2NvbnN0cnVjdG9yJ1xuICAgIGNvbnRpbnVlIHVubGVzcyBnbmQuZnVuY3Rpb24uaXNhIG1ldGhvZFxuICAgIFJbIGtleSBdID0gbWV0aG9kXG4gIHJldHVybiBSXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuYmluZF9pbnN0YW5jZV9tZXRob2RzID0gKCBpbnN0YW5jZSwga2VlcF9uYW1lID0gdHJ1ZSApIC0+XG4gIGZvciBrZXksIG1ldGhvZCBvZiBnZXRfaW5zdGFuY2VfbWV0aG9kcyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgaW5zdGFuY2VcbiAgICBpZiBrZWVwX25hbWVcbiAgICAgIGhpZGUgaW5zdGFuY2UsIGtleSwgbmFtZWl0IG1ldGhvZC5uYW1lLCBtZXRob2QuYmluZCBpbnN0YW5jZVxuICAgIGVsc2VcbiAgICAgIGhpZGUgaW5zdGFuY2UsIGtleSwgbWV0aG9kLmJpbmQgaW5zdGFuY2VcbiAgcmV0dXJuIG51bGxcblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbnB1c2hfYXQgPSAoIGxpc3QsIGlkeCwgeCApIC0+XG4gIHVubGVzcyBpZHggPCAwXG4gICAgdGhyb3cgbmV3IEVycm9yIFwizqluZmFfX183IGV4cGVjdGVkIG5lZ2F0aXZlIG51bWJlciwgZ290ICN7cnByIGlkeH1cIlxuICBsaXN0LnNwbGljZSAoIE1hdGgubWF4IGxpc3QubGVuZ3RoICsgaWR4LCAwICksIDAsIHhcbiAgcmV0dXJuIGxpc3RcblxuIyAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiMgcG9wX2F0ID0gKCBsaXN0LCBpZHgsIHggKSAtPlxuIyAgIHVubGVzcyBpZHggPCAwXG4jICAgICB0aHJvdyBuZXcgRXJyb3IgXCLOqW5mYV9fXzggZXhwZWN0ZWQgbmVnYXRpdmUgbnVtYmVyLCBnb3QgI3tycHIgaWR4fVwiXG4jICAgdW5sZXNzIGxpc3QubGVuZ3RoID49IE1hdGguYWJzIGlkeFxuIyAgICAgdGhyb3cgbmV3IEVycm9yIFwizqluZmFfX185IGxpc3QgdG9vIHNob3J0LCBnb3QgaW5kZXggI3tpZHh9IGZvciBsZW5ndGggb2YgI3tsaXN0Lmxlbmd0aH1cIlxuIyAgIHJldHVybiAoIGxpc3Quc3BsaWNlIGlkeCwgMSApWyAwIF1cblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5zZXRfYXQgPSAoIGxpc3QsIGlkeCwgeCApIC0+XG4gIHVubGVzcyBpZHggPCAwXG4gICAgdGhyb3cgbmV3IEVycm9yIFwizqluZmFfXzEwIGV4cGVjdGVkIG5lZ2F0aXZlIG51bWJlciwgZ290ICN7cnByIGlkeH1cIlxuICBsaXN0WyBsaXN0Lmxlbmd0aCArIGlkeCBdID0geFxuICByZXR1cm4geFxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZGVidWcgICA9IGNvbnNvbGUuZGVidWdcbmhlbHAgICAgPSBjb25zb2xlLmhlbHBcbndhcm4gICAgPSBjb25zb2xlLndhcm5cbnJwciAgICAgPSAoIHggKSAtPiAoIHJlcXVpcmUgJ2xvdXBlJyApLmluc3BlY3QgeFxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbm1vZHVsZS5leHBvcnRzID0ge1xuICBUZW1wbGF0ZVxuICBnbmRcbiAgY3JlYXRlX3ZhbGlkYXRvclxuICBoaWRlXG4gIG5hbWVpdFxuICAjIGdldF9pbnN0YW5jZV9tZXRob2RzXG4gIGJpbmRfaW5zdGFuY2VfbWV0aG9kc1xuICBwdXNoX2F0XG4gICMgcG9wX2F0XG4gIHNldF9hdFxuICBkZWJ1Z1xuICBoZWxwXG4gIHdhcm5cbiAgcnByIH1cbiJdfQ==\n","\n'use strict'\n\n#===========================================================================================================\n# optional                  = Symbol 'optional'\npod_prototypes            = Object.freeze [ null, ( Object.getPrototypeOf {} ), ]\n# new_pod                   = -> {}\nnew_pod                   = -> Object.create null\n\n# #===========================================================================================================\n# @bind_proto = ( that, f ) -> that::[ f.name ] = f.bind that::\n\n#===========================================================================================================\nclass Template\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( cfg = null ) ->\n    for name, descriptor of Object.getOwnPropertyDescriptors cfg ? {}\n      descriptor = switch true\n        #...................................................................................................\n        when gnd.function.isa descriptor.value    then do ( descriptor ) =>\n          { configurable, value: get, } = descriptor\n          return { enumerable: true, configurable, get, }\n        #...................................................................................................\n        when gnd.pod.isa      descriptor.value    then do ( descriptor ) =>\n          { configurable, value, } = descriptor\n          get = -> new Template value\n          return { enumerable: true, configurable, get, }\n        #...................................................................................................\n        else\n          descriptor\n      #.....................................................................................................\n      Object.defineProperty @, name, descriptor\n    return undefined\n\n\n#===========================================================================================================\ncreate_validator = ( typename, isa ) ->\n  ### TAINT `gnd.nonempty_text.validate typename` ###\n  ### TAINT `gnd.function.validate isa` ###\n  ### TAINT silently accepts truthy, falsy values returned by `isa()`, not only booleans ###\n  return ( x ) ->\n    return x if isa x\n    throw new TypeError \"Ωnfa___1 validation error: expected a #{typename} got #{rpr x}\"\n\n\n#===========================================================================================================\ngnd = do ->\n  R =\n    # boolean:        isa:  ( x ) -> ( x is true ) or ( x is false )\n    #.......................................................................................................\n    function:\n      isa:  ( x ) -> ( Object::toString.call x ) is '[object Function]'\n    #.......................................................................................................\n    template:\n      isa:    ( x ) -> x instanceof Template\n    #.......................................................................................................\n    pod:\n      isa:    ( x ) -> x? and ( Object.getPrototypeOf x ) in pod_prototypes\n      create: ( Q... ) -> Object.assign new_pod(), Q...\n    #.......................................................................................................\n    nfa_cfg:\n      isa: ( x ) ->\n        return false unless gnd.pod.isa x\n        return false unless gnd.template.isa_optional x.template\n        return false unless gnd.function.isa_optional x.isa\n        return false unless gnd.function.isa_optional x.validate\n        # return false unless gnd.function.isa_optional x.type\n        return true\n      template:\n        template: null\n        isa:      null\n        validate: null\n        type:     null\n  #.........................................................................................................\n  for typename, type of R\n    type.name     = typename\n    # type.validate = ( x ) -> ...\n  #.........................................................................................................\n  return R\n### TAINT this is more or less `ClearType.Type::create()` ###\ndo => for typename, type of gnd then do ( typename, type ) ->\n  if type.template? then type.template = ( new Template type.template )\n  if type.isa?\n    unless type.isa_optional? then type.isa_optional  = ( x ) -> ( not x? ) or ( type.isa x )\n    unless type.validate?     then type.validate      = create_validator type.name, ( x ) -> type.isa x\n  return null\n\n\n#===========================================================================================================\nhide = ( object, name, value ) => Object.defineProperty object, name,\n    enumerable:   false\n    writable:     true\n    configurable: true\n    value:        value\n\n#===========================================================================================================\nnameit = ( name, f ) -> Object.defineProperty f, 'name', { value: name, }; f\n\n#===========================================================================================================\nget_instance_methods = ( instance ) ->\n  R             = {}\n  for key, { value: method, } of Object.getOwnPropertyDescriptors instance\n    continue if key is 'constructor'\n    continue unless gnd.function.isa method\n    R[ key ] = method\n  return R\n\n#===========================================================================================================\nbind_instance_methods = ( instance, keep_name = true ) ->\n  for key, method of get_instance_methods Object.getPrototypeOf instance\n    if keep_name\n      hide instance, key, nameit method.name, method.bind instance\n    else\n      hide instance, key, method.bind instance\n  return null\n\n\n#===========================================================================================================\npush_at = ( list, idx, x ) ->\n  unless idx < 0\n    throw new Error \"Ωnfa___7 expected negative number, got #{rpr idx}\"\n  list.splice ( Math.max list.length + idx, 0 ), 0, x\n  return list\n\n# #-----------------------------------------------------------------------------------------------------------\n# pop_at = ( list, idx, x ) ->\n#   unless idx < 0\n#     throw new Error \"Ωnfa___8 expected negative number, got #{rpr idx}\"\n#   unless list.length >= Math.abs idx\n#     throw new Error \"Ωnfa___9 list too short, got index #{idx} for length of #{list.length}\"\n#   return ( list.splice idx, 1 )[ 0 ]\n\n#-----------------------------------------------------------------------------------------------------------\nset_at = ( list, idx, x ) ->\n  unless idx < 0\n    throw new Error \"Ωnfa__10 expected negative number, got #{rpr idx}\"\n  list[ list.length + idx ] = x\n  return x\n\n\n#===========================================================================================================\ndebug   = console.debug\nhelp    = console.help\nwarn    = console.warn\nrpr     = ( x ) -> ( require 'loupe' ).inspect x\n\n#===========================================================================================================\nmodule.exports = {\n  Template\n  gnd\n  create_validator\n  hide\n  nameit\n  # get_instance_methods\n  bind_instance_methods\n  push_at\n  # pop_at\n  set_at\n  debug\n  help\n  warn\n  rpr }\n","(function() {\n  'use strict';\n  var Argument_type_error, Arity_error, H, Internals, Named_arity_error, Nfa_error, Normalize_function_arguments, Not_implemented_error, Positional_arity_error, Runtime_arity_error, Signature_cfg_position_error, Signature_disposition_Error, Signature_error, Signature_missing_parameter_Error, Signature_naming_Error, Template, Type_error, Value_mismatch_error, bind_instance_methods, create_validator, debug, get_signature, gnd, help, hide, internals, nameit, nfa, normalizer, push_at, rpr, set_at, warn;\n\n  //===========================================================================================================\n  H = require('./helpers');\n\n  // get_instance_methods\n  // pop_at\n  ({Template, gnd, hide, create_validator, bind_instance_methods, nameit, push_at, set_at, debug, warn, help, rpr} = H);\n\n  // E                         = require './errors'\n  // optional                  = Symbol 'optional'\n\n    //=========================================================================================================\n  Nfa_error = class Nfa_error extends Error {};\n\n  Arity_error = class Arity_error extends Nfa_error {};\n\n  Named_arity_error = class Named_arity_error extends Arity_error {};\n\n  Runtime_arity_error = class Runtime_arity_error extends Arity_error {};\n\n  Positional_arity_error = class Positional_arity_error extends Arity_error {};\n\n  Not_implemented_error = class Not_implemented_error extends Nfa_error {};\n\n  Signature_error = class Signature_error extends Nfa_error {};\n\n  Signature_disposition_Error = class Signature_disposition_Error extends Signature_error {};\n\n  Signature_naming_Error = class Signature_naming_Error extends Signature_error {};\n\n  Signature_missing_parameter_Error = class Signature_missing_parameter_Error extends Signature_error {};\n\n  Signature_cfg_position_error = class Signature_cfg_position_error extends Signature_error {};\n\n  Value_mismatch_error = class Value_mismatch_error extends Nfa_error {};\n\n  Type_error = class Type_error extends Nfa_error {};\n\n  Argument_type_error = class Argument_type_error extends Type_error {};\n\n  //===========================================================================================================\n  internals = new (Internals = class Internals {\n    constructor() {\n      this.pod_prototypes = H.pod_prototypes;\n      this.gnd = gnd;\n      this.push_at = push_at;\n      // @pop_at         = pop_at\n      this.set_at = set_at;\n      this.nameit = nameit;\n      return void 0;\n    }\n\n  })();\n\n  //===========================================================================================================\n  Normalize_function_arguments = class Normalize_function_arguments {\n    //---------------------------------------------------------------------------------------------------------\n    constructor(cfg = null) {\n      if (cfg != null) {\n        throw new Not_implemented_error(\"Ωnfa___1 configuration not implemented\");\n      }\n      bind_instance_methods(this);\n      return void 0;\n    }\n\n    //---------------------------------------------------------------------------------------------------------\n    nfa(cfg, fn)/* Normalize Function Arguments */ {\n      var arity, fn_name, names, q_idx, q_ridx, validate;\n      switch (arity = arguments.length) {\n        case 1:\n          [cfg, fn] = [{}, cfg];\n          break;\n        case 2:\n          null;\n          break;\n        default:\n          throw new Runtime_arity_error(`Ωnfa___2 expected 1 or 2 arguments, got ${arity}`);\n      }\n      //.......................................................................................................\n      /* TAINT do this in `gnd` */\n      if (!gnd.pod.isa(cfg)) {\n        throw new Type_error(`Ωnfa___3 expected a POD, got ${rpr(cfg)}`);\n      }\n      if (!gnd.function.isa(fn)) {\n        throw new Type_error(`Ωnfa___4 expected a function, got ${rpr(cfg)}`);\n      }\n      //.......................................................................................................\n      cfg = {...gnd.nfa_cfg.template, ...cfg};\n      if (cfg.template != null) {\n        cfg.template = new Template(cfg.template);\n      }\n      gnd.nfa_cfg.validate(cfg);\n      //.......................................................................................................\n      ({names, q_idx, q_ridx} = this.get_signature(fn));\n      arity = names.length;\n      fn_name = fn.name;\n      //.......................................................................................................\n      validate = cfg.isa != null ? create_validator(`${fn_name}_cfg`, cfg.isa) : function(x) {\n        return x;\n      };\n      //.......................................................................................................\n      return nameit(fn_name, function(...P) {\n        /* ATP, `P` holds `arity` arguments and there *is* a POD in CFG position (which we assume to\n               represent CFG so we can make a copy, filling in template values): */\n        var Q, i, idx, len, name;\n        if (P.length > arity) {\n          throw new Positional_arity_error(`Ωnfa___5 expected up to ${arity} arguments, got ${P.length}`);\n        }\n        //.....................................................................................................\n        if (gnd.pod.isa(P.at(q_ridx))) {\n          while (P.length < arity) {\n            push_at(P, q_ridx, void 0);\n          }\n          Q = set_at(P, q_ridx, gnd.pod.create(cfg.template, P.at(q_ridx)));\n        } else {\n          while (P.length < arity) {\n            P.push(void 0);\n          }\n          /* ATP, `P` holds `arity` arguments and there *may be* an `undefined` in CFG position (which we\n                 assume is replaceable by a newly created CFG instance with template values): */\n          if ((P.at(q_ridx)) === void 0) {\n            Q = set_at(P, q_ridx, gnd.pod.create(cfg.template));\n          } else {\n            throw new Argument_type_error(`Ωnfa___6 expected an optional POD at position ${q_ridx}, got ${rpr(P.at(q_ridx))}`);\n          }\n        }\n//.....................................................................................................\n/* Harmonize values: */\n        for (idx = i = 0, len = names.length; i < len; idx = ++i) {\n          name = names[idx];\n          if (idx === q_idx/* skip over CFG object's (`Q`'s') position in P */) {\n            continue;\n          }\n          if (P[idx] === void 0) {\n            P[idx] = Q[name];\n          } else {\n            Q[name] = P[idx];\n          }\n          if (Q[name] === void 0) {\n            Q[name] = P[idx];\n          }\n        }\n        //.....................................................................................................\n        return validate(fn.call(this, ...P));\n      });\n    }\n\n    //---------------------------------------------------------------------------------------------------------\n    get_signature(fn) {\n      /* thx to https://github.com/sindresorhus/identifier-regex */\n      var i, idx, jsid_re, len, name, names, names_rpr, q_idx, q_ridx, signature, this_cfg_q_name;\n      this_cfg_q_name = 'cfg'/* TAINT pick from @cfg */\n      jsid_re = /^[$_\\p{ID_Start}][$_\\u200C\\u200D\\p{ID_Continue}]*$/sv;\n      //.......................................................................................................\n      signature = fn.toString();\n      signature = signature.replace(/\\s+/svg, '');\n      signature = signature.replace(/^[^\\(]*\\((?<parens>[^\\)]*)\\).*$/svg, '$<parens>');\n      names = signature.split(',');\n      //.......................................................................................................\n      q_idx = null;\n      for (idx = i = 0, len = names.length; i < len; idx = ++i) {\n        name = names[idx];\n        if (jsid_re.test(name)) {\n          if (name === this_cfg_q_name) {\n            q_idx = idx;\n          }\n        } else {\n          throw new Signature_disposition_Error(`Ωnfa___7 parameter disposition not compliant: ${rpr(name)} in ${rpr(signature)}`);\n        }\n      }\n      //.......................................................................................................\n      if (q_idx == null) {\n        names_rpr = names.join(', ');\n        throw new Signature_naming_Error(`Ωnfa___8 parameter naming not compliant: no parameter named ${rpr(this_cfg_q_name)}, got ${rpr(names_rpr)}`);\n      }\n      //.......................................................................................................\n      switch (q_idx) {\n        case names.length - 2:\n          q_ridx = -2;\n          break;\n        case names.length - 1:\n          q_ridx = -1;\n          break;\n        default:\n          throw new Signature_cfg_position_error(`Ωnfa___9 parameter ordering not compliant: expected ${rpr(this_cfg_q_name)} to come last or next-to-last, found it at index ${q_idx} of ${names.length} parameters`);\n      }\n      //.......................................................................................................\n      return {names, q_idx, q_ridx};\n    }\n\n  };\n\n  //===========================================================================================================\n  normalizer = new Normalize_function_arguments();\n\n  ({nfa, get_signature} = normalizer);\n\n  //===========================================================================================================\n  module.exports = {nfa, get_signature, Normalize_function_arguments, Template, internals};\n\n}).call(this);\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL21haW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQUE7QUFBQSxNQUFBLG1CQUFBLEVBQUEsV0FBQSxFQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsaUJBQUEsRUFBQSxTQUFBLEVBQUEsNEJBQUEsRUFBQSxxQkFBQSxFQUFBLHNCQUFBLEVBQUEsbUJBQUEsRUFBQSw0QkFBQSxFQUFBLDJCQUFBLEVBQUEsZUFBQSxFQUFBLGlDQUFBLEVBQUEsc0JBQUEsRUFBQSxRQUFBLEVBQUEsVUFBQSxFQUFBLG9CQUFBLEVBQUEscUJBQUEsRUFBQSxnQkFBQSxFQUFBLEtBQUEsRUFBQSxhQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLElBQUE7OztFQUdBLENBQUEsR0FBNEIsT0FBQSxDQUFRLFdBQVIsRUFINUI7Ozs7RUFJQSxDQUFBLENBQUUsUUFBRixFQUNFLEdBREYsRUFFRSxJQUZGLEVBR0UsZ0JBSEYsRUFLRSxxQkFMRixFQU1FLE1BTkYsRUFPRSxPQVBGLEVBU0UsTUFURixFQVVFLEtBVkYsRUFXRSxJQVhGLEVBWUUsSUFaRixFQWFFLEdBYkYsQ0FBQSxHQWE0QixDQWI1QixFQUpBOzs7Ozs7RUF1Qk0sWUFBTixNQUFBLFVBQUEsUUFBa0QsTUFBbEQsQ0FBQTs7RUFDTSxjQUFOLE1BQUEsWUFBQSxRQUFrRCxVQUFsRCxDQUFBOztFQUNNLG9CQUFOLE1BQUEsa0JBQUEsUUFBa0QsWUFBbEQsQ0FBQTs7RUFDTSxzQkFBTixNQUFBLG9CQUFBLFFBQWtELFlBQWxELENBQUE7O0VBQ00seUJBQU4sTUFBQSx1QkFBQSxRQUFrRCxZQUFsRCxDQUFBOztFQUNNLHdCQUFOLE1BQUEsc0JBQUEsUUFBa0QsVUFBbEQsQ0FBQTs7RUFDTSxrQkFB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R0FBRixFQUNFLGFBREYsQ0FBQSxHQUM0QixVQUQ1QixFQS9JQTs7O0VBbUpBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLENBQUUsR0FBRixFQUFPLGFBQVAsRUFBc0IsNEJBQXRCLEVBQW9ELFFBQXBELEVBQThELFNBQTlEO0FBbkpqQiIsInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuSCAgICAgICAgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUgJy4vaGVscGVycydcbnsgVGVtcGxhdGVcbiAgZ25kXG4gIGhpZGVcbiAgY3JlYXRlX3ZhbGlkYXRvclxuICAjIGdldF9pbnN0YW5jZV9tZXRob2RzXG4gIGJpbmRfaW5zdGFuY2VfbWV0aG9kc1xuICBuYW1laXRcbiAgcHVzaF9hdFxuICAjIHBvcF9hdFxuICBzZXRfYXRcbiAgZGVidWdcbiAgd2FyblxuICBoZWxwXG4gIHJwciAgICAgICAgICAgICAgICAgICB9ID0gSFxuIyBFICAgICAgICAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSAnLi9lcnJvcnMnXG4jIG9wdGlvbmFsICAgICAgICAgICAgICAgICAgPSBTeW1ib2wgJ29wdGlvbmFsJ1xuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIE5mYV9lcnJvciAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZHMgRXJyb3JcbmNsYXNzIEFyaXR5X2Vycm9yICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZHMgTmZhX2Vycm9yXG5jbGFzcyBOYW1lZF9hcml0eV9lcnJvciAgICAgICAgICAgICAgICAgICBleHRlbmRzIEFyaXR5X2Vycm9yXG5jbGFzcyBSdW50aW1lX2FyaXR5X2Vycm9yICAgICAgICAgICAgICAgICBleHRlbmRzIEFyaXR5X2Vycm9yXG5jbGFzcyBQb3NpdGlvbmFsX2FyaXR5X2Vycm9yICAgICAgICAgICAgICBleHRlbmRzIEFyaXR5X2Vycm9yXG5jbGFzcyBOb3RfaW1wbGVtZW50ZWRfZXJyb3IgICAgICAgICAgICAgICBleHRlbmRzIE5mYV9lcnJvclxuY2xhc3MgU2lnbmF0dXJlX2Vycm9yICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kcyBOZmFfZXJyb3JcbmNsYXNzIFNpZ25hdHVyZV9kaXNwb3NpdGlvbl9FcnJvciAgICAgICAgIGV4dGVuZHMgU2lnbmF0dXJlX2Vycm9yXG5jbGFzcyBTaWduYXR1cmVfbmFtaW5nX0Vycm9yICAgICAgICAgICAgICBleHRlbmRzIFNpZ25hdHVyZV9lcnJvclxuY2xhc3MgU2lnbmF0dXJlX21pc3NpbmdfcGFyYW1ldGVyX0Vycm9yICAgZXh0ZW5kcyBTaWduYXR1cmVfZXJyb3JcbmNsYXNzIFNpZ25hdHVyZV9jZmdfcG9zaXRpb25fZXJyb3IgICAgICAgIGV4dGVuZHMgU2lnbmF0dXJlX2Vycm9yXG5jbGFzcyBWYWx1ZV9taXNtYXRjaF9lcnJvciAgICAgICAgICAgICAgICBleHRlbmRzIE5mYV9lcnJvclxuY2xhc3MgVHlwZV9lcnJvciAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kcyBOZmFfZXJyb3JcbmNsYXNzIEFyZ3VtZW50X3R5cGVfZXJyb3IgICAgICAgICAgICAgICAgIGV4dGVuZHMgVHlwZV9lcnJvclxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuaW50ZXJuYWxzID0gbmV3IGNsYXNzIEludGVybmFscyB0aGVuIGNvbnN0cnVjdG9yOiAtPlxuICBAcG9kX3Byb3RvdHlwZXMgPSBILnBvZF9wcm90b3R5cGVzXG4gIEBnbmQgICAgICAgICAgICA9IGduZFxuICBAcHVzaF9hdCAgICAgICAgPSBwdXNoX2F0XG4gICMgQHBvcF9hdCAgICAgICAgID0gcG9wX2F0XG4gIEBzZXRfYXQgICAgICAgICA9IHNldF9hdFxuICBAbmFtZWl0ICAgICAgICAgPSBuYW1laXRcbiAgcmV0dXJuIHVuZGVmaW5lZFxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgTm9ybWFsaXplX2Z1bmN0aW9uX2FyZ3VtZW50c1xuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3I6ICggY2ZnID0gbnVsbCApIC0+XG4gICAgaWYgY2ZnP1xuICAgICAgdGhyb3cgbmV3IE5vdF9pbXBsZW1lbnRlZF9lcnJvciBcIs6pbmZhX19fMSBjb25maWd1cmF0aW9uIG5vdCBpbXBsZW1lbnRlZFwiXG4gICAgYmluZF9pbnN0YW5jZV9tZXRob2RzIEBcbiAgICByZXR1cm4gdW5kZWZpbmVkXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBuZmE6ICggY2ZnLCBmbiApIC0+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIE5vcm1hbGl6ZSBGdW5jdGlvbiBBcmd1bWVudHMgIyMjXG4gICAgc3dpdGNoIGFyaXR5ID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgd2hlbiAxIHRoZW4gWyBjZmcsIGZuLCBdID0gWyB7fSwgY2ZnLCBdXG4gICAgICB3aGVuIDIgdGhlbiBudWxsXG4gICAgICBlbHNlIHRocm93IG5ldyBSdW50aW1lX2FyaXR5X2Vycm9yIFwizqluZmFfX18yIGV4cGVjdGVkIDEgb3IgMiBhcmd1bWVudHMsIGdvdCAje2FyaXR5fVwiXG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICAjIyMgVEFJTlQgZG8gdGhpcyBpbiBgZ25kYCAjIyNcbiAgICB1bmxlc3MgZ25kLnBvZC5pc2EgY2ZnICAgICAgdGhlbiB0aHJvdyBuZXcgVHlwZV9lcnJvciBcIs6pbmZhX19fMyBleHBlY3RlZCBhIFBPRCwgZ290ICN7cnByIGNmZ31cIlxuICAgIHVubGVzcyBnbmQuZnVuY3Rpb24uaXNhIGZuICB0aGVuIHRocm93IG5ldyBUeXBlX2Vycm9yIFwizqluZmFfX180IGV4cGVjdGVkIGEgZnVuY3Rpb24sIGdvdCAje3JwciBjZmd9XCJcbiAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgIGNmZyAgICAgICAgICAgICAgID0geyBnbmQubmZhX2NmZy50ZW1wbGF0ZS4uLiwgY2ZnLi4uLCB9XG4gICAgY2ZnLnRlbXBsYXRlICAgICAgPSAoIG5ldyBUZW1wbGF0ZSBjZmcudGVtcGxhdGUgKSBpZiBjZmcudGVtcGxhdGU/XG4gICAgZ25kLm5mYV9jZmcudmFsaWRhdGUgY2ZnXG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICB7IG5hbWVzXG4gICAgICBxX2lkeFxuICAgICAgcV9yaWR4ICAgICAgICB9ID0gQGdldF9zaWduYXR1cmUgZm5cbiAgICBhcml0eSAgICAgICAgICAgICA9IG5hbWVzLmxlbmd0aFxuICAgIGZuX25hbWUgICAgICAgICAgID0gZm4ubmFtZVxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgdmFsaWRhdGUgPSBpZiBjZmcuaXNhPyB0aGVuICggY3JlYXRlX3ZhbGlkYXRvciBcIiN7Zm5fbmFtZX1fY2ZnXCIsIGNmZy5pc2EgKSBlbHNlICggeCApIC0+IHhcbiAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgIHJldHVybiBuYW1laXQgZm5fbmFtZSwgKCBQLi4uICkgLT5cbiAgICAgIGlmIFAubGVuZ3RoID4gYXJpdHlcbiAgICAgICAgdGhyb3cgbmV3IFBvc2l0aW9uYWxfYXJpdHlfZXJyb3IgXCLOqW5mYV9fXzUgZXhwZWN0ZWQgdXAgdG8gI3thcml0eX0gYXJndW1lbnRzLCBnb3QgI3tQLmxlbmd0aH1cIlxuICAgICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgICBpZiBnbmQucG9kLmlzYSBQLmF0IHFfcmlkeFxuICAgICAgICBwdXNoX2F0IFAsIHFfcmlkeCwgdW5kZWZpbmVkIHdoaWxlIFAubGVuZ3RoIDwgYXJpdHlcbiAgICAgICAgIyMjIEFUUCwgYFBgIGhvbGRzIGBhcml0eWAgYXJndW1lbnRzIGFuZCB0aGVyZSAqaXMqIGEgUE9EIGluIENGRyBwb3NpdGlvbiAod2hpY2ggd2UgYXNzdW1lIHRvXG4gICAgICAgIHJlcHJlc2VudCBDRkcgc28gd2UgY2FuIG1ha2UgYSBjb3B5LCBmaWxsaW5nIGluIHRlbXBsYXRlIHZhbHVlcyk6ICMjI1xuICAgICAgICBRID0gc2V0X2F0IFAsIHFfcmlkeCwgZ25kLnBvZC5jcmVhdGUgY2ZnLnRlbXBsYXRlLCBQLmF0IHFfcmlkeFxuICAgICAgZWxzZVxuICAgICAgICBQLnB1c2ggdW5kZWZpbmVkIHdoaWxlIFAubGVuZ3RoIDwgYXJpdHlcbiAgICAgICAgIyMjIEFUUCwgYFBgIGhvbGRzIGBhcml0eWAgYXJndW1lbnRzIGFuZCB0aGVyZSAqbWF5IGJlKiBhbiBgdW5kZWZpbmVkYCBpbiBDRkcgcG9zaXRpb24gKHdoaWNoIHdlXG4gICAgICAgIGFzc3VtZSBpcyByZXBsYWNlYWJsZSBieSBhIG5ld2x5IGNyZWF0ZWQgQ0ZHIGluc3RhbmNlIHdpdGggdGVtcGxhdGUgdmFsdWVzKTogIyMjXG4gICAgICAgIGlmICggUC5hdCBxX3JpZHggKSBpcyB1bmRlZmluZWRcbiAgICAgICAgICBRID0gc2V0X2F0IFAsIHFfcmlkeCwgZ25kLnBvZC5jcmVhdGUgY2ZnLnRlbXBsYXRlXG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRfdHlwZV9lcnJvciBcIs6pbmZhX19fNiBleHBlY3RlZCBhbiBvcHRpb25hbCBQT0QgYXQgcG9zaXRpb24gI3txX3JpZHh9LCBnb3QgI3tycHIgUC5hdCBxX3JpZHh9XCJcbiAgICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICAgIyMjIEhhcm1vbml6ZSB2YWx1ZXM6ICMjI1xuICAgICAgZm9yIG5hbWUsIGlkeCBpbiBuYW1lc1xuICAgICAgICBjb250aW51ZSBpZiBpZHggaXMgcV9pZHggIyMjIHNraXAgb3ZlciBDRkcgb2JqZWN0J3MgKGBRYCdzJykgcG9zaXRpb24gaW4gUCAjIyNcbiAgICAgICAgaWYgKCBQWyBpZHggICBdIGlzIHVuZGVmaW5lZCApICB0aGVuICBQWyBpZHggIF0gPSBRWyBuYW1lIF1cbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBRWyBuYW1lIF0gPSBQWyBpZHggIF0gIyMjIHBvcy5hcmc6cyBvdGhlciB0aGFuIHVuZGVmLiB0YWtlIHByZWNlZGVuY2UgIyMjXG4gICAgICAgIGlmICggUVsgbmFtZSAgXSBpcyB1bmRlZmluZWQgKSAgdGhlbiAgUVsgbmFtZSBdID0gUFsgaWR4ICBdICMjIyBlbnN1cmUgYWxsIHNpZ24uIG5hbWVzIGFyZSBzZXQgaW4gQ0ZHIFBPRCBgUWAgIyMjXG4gICAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICAgIHJldHVybiB2YWxpZGF0ZSBmbi5jYWxsIEAsIFAuLi5cblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGdldF9zaWduYXR1cmU6ICggZm4gKSAtPlxuICAgIHRoaXNfY2ZnX3FfbmFtZSA9ICdjZmcnICMjIyBUQUlOVCBwaWNrIGZyb20gQGNmZyAjIyNcbiAgICAjIyMgdGh4IHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvaWRlbnRpZmllci1yZWdleCAjIyNcbiAgICBqc2lkX3JlICAgPSAvLy8gXiBbICQgXyBcXHB7SURfU3RhcnR9IF0gWyAkIF8gXFx1MjAwQyBcXHUyMDBEIFxccHtJRF9Db250aW51ZX0gXSogJCAvLy9zdlxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgc2lnbmF0dXJlID0gZm4udG9TdHJpbmcoKVxuICAgIHNpZ25hdHVyZSA9IHNpZ25hdHVyZS5yZXBsYWNlIC8vLyBcXHMrIC8vL3N2ZywgJydcbiAgICBzaWduYXR1cmUgPSBzaWduYXR1cmUucmVwbGFjZSAvLy8gXiBbXiBcXCggXSogXFwoICg/PHBhcmVucz4gW14gXFwpIF0qICkgXFwpIC4qICQgLy8vc3ZnLCAnJDxwYXJlbnM+J1xuICAgIG5hbWVzICAgICA9IHNpZ25hdHVyZS5zcGxpdCAnLCdcbiAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgIHFfaWR4ICAgICA9IG51bGxcbiAgICBmb3IgbmFtZSwgaWR4IGluIG5hbWVzXG4gICAgICBpZiBqc2lkX3JlLnRlc3QgbmFtZVxuICAgICAgICBxX2lkeCA9IGlkeCBpZiBuYW1lIGlzIHRoaXNfY2ZnX3FfbmFtZVxuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgU2lnbmF0dXJlX2Rpc3Bvc2l0aW9uX0Vycm9yIFwizqluZmFfX183IHBhcmFtZXRlciBkaXNwb3NpdGlvbiBub3QgY29tcGxpYW50OiAje3JwciBuYW1lfSBpbiAje3JwciBzaWduYXR1cmV9XCJcbiAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgIHVubGVzcyBxX2lkeD9cbiAgICAgIG5hbWVzX3JwciA9IG5hbWVzLmpvaW4gJywgJ1xuICAgICAgdGhyb3cgbmV3IFNpZ25hdHVyZV9uYW1pbmdfRXJyb3IgXCLOqW5mYV9fXzggcGFyYW1ldGVyIG5hbWluZyBub3QgY29tcGxpYW50OiBubyBwYXJhbWV0ZXIgbmFtZWQgI3tycHIgdGhpc19jZmdfcV9uYW1lfSwgZ290ICN7cnByIG5hbWVzX3Jwcn1cIlxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgc3dpdGNoIHFfaWR4XG4gICAgICB3aGVuIG5hbWVzLmxlbmd0aCAtIDIgdGhlbiBxX3JpZHggPSAtMlxuICAgICAgd2hlbiBuYW1lcy5sZW5ndGggLSAxIHRoZW4gcV9yaWR4ID0gLTFcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IFNpZ25hdHVyZV9jZmdfcG9zaXRpb25fZXJyb3IgXCLOqW5mYV9fXzkgcGFyYW1ldGVyIG9yZGVyaW5nIG5vdCBjb21wbGlhbnQ6IGV4cGVjdGVkICN7cnByIHRoaXNfY2ZnX3FfbmFtZX0gdG8gY29tZSBsYXN0IG9yIG5leHQtdG8tbGFzdCwgZm91bmQgaXQgYXQgaW5kZXggI3txX2lkeH0gb2YgI3tuYW1lcy5sZW5ndGh9IHBhcmFtZXRlcnNcIlxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgcmV0dXJuIHsgbmFtZXMsIHFfaWR4LCBxX3JpZHgsIH1cblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbm5vcm1hbGl6ZXIgICAgICAgICAgICAgICAgPSBuZXcgTm9ybWFsaXplX2Z1bmN0aW9uX2FyZ3VtZW50cygpXG57IG5mYVxuICBnZXRfc2lnbmF0dXJlICAgICAgICAgfSA9IG5vcm1hbGl6ZXJcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5tb2R1bGUuZXhwb3J0cyA9IHsgbmZhLCBnZXRfc2lnbmF0dXJlLCBOb3JtYWxpemVfZnVuY3Rpb25fYXJndW1lbnRzLCBUZW1wbGF0ZSwgaW50ZXJuYWxzLCB9XG5cbiJdfQ==\n","\n'use strict'\n\n#===========================================================================================================\nH                         = require './helpers'\n{ Template\n  gnd\n  hide\n  create_validator\n  # get_instance_methods\n  bind_instance_methods\n  nameit\n  push_at\n  # pop_at\n  set_at\n  debug\n  warn\n  help\n  rpr                   } = H\n# E                         = require './errors'\n# optional                  = Symbol 'optional'\n\n\n#=========================================================================================================\nclass Nfa_error                           extends Error\nclass Arity_error                         extends Nfa_error\nclass Named_arity_error                   extends Arity_error\nclass Runtime_arity_error                 extends Arity_error\nclass Positional_arity_error              extends Arity_error\nclass Not_implemented_error               extends Nfa_error\nclass Signature_error                     extends Nfa_error\nclass Signature_disposition_Error         extends Signature_error\nclass Signature_naming_Error              extends Signature_error\nclass Signature_missing_parameter_Error   extends Signature_error\nclass Signature_cfg_position_error        extends Signature_error\nclass Value_mismatch_error                extends Nfa_error\nclass Type_error                          extends Nfa_error\nclass Argument_type_error                 extends Type_error\n\n\n#===========================================================================================================\ninternals = new class Internals then constructor: ->\n  @pod_prototypes = H.pod_prototypes\n  @gnd            = gnd\n  @push_at        = push_at\n  # @pop_at         = pop_at\n  @set_at         = set_at\n  @nameit         = nameit\n  return undefined\n\n\n#===========================================================================================================\nclass Normalize_function_arguments\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( cfg = null ) ->\n    if cfg?\n      throw new Not_implemented_error \"Ωnfa___1 configuration not implemented\"\n    bind_instance_methods @\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  nfa: ( cfg, fn ) ->                                                   ### Normalize Function Arguments ###\n    switch arity = arguments.length\n      when 1 then [ cfg, fn, ] = [ {}, cfg, ]\n      when 2 then null\n      else throw new Runtime_arity_error \"Ωnfa___2 expected 1 or 2 arguments, got #{arity}\"\n    #.......................................................................................................\n    ### TAINT do this in `gnd` ###\n    unless gnd.pod.isa cfg      then throw new Type_error \"Ωnfa___3 expected a POD, got #{rpr cfg}\"\n    unless gnd.function.isa fn  then throw new Type_error \"Ωnfa___4 expected a function, got #{rpr cfg}\"\n    #.......................................................................................................\n    cfg               = { gnd.nfa_cfg.template..., cfg..., }\n    cfg.template      = ( new Template cfg.template ) if cfg.template?\n    gnd.nfa_cfg.validate cfg\n    #.......................................................................................................\n    { names\n      q_idx\n      q_ridx        } = @get_signature fn\n    arity             = names.length\n    fn_name           = fn.name\n    #.......................................................................................................\n    validate = if cfg.isa? then ( create_validator \"#{fn_name}_cfg\", cfg.isa ) else ( x ) -> x\n    #.......................................................................................................\n    return nameit fn_name, ( P... ) ->\n      if P.length > arity\n        throw new Positional_arity_error \"Ωnfa___5 expected up to #{arity} arguments, got #{P.length}\"\n      #.....................................................................................................\n      if gnd.pod.isa P.at q_ridx\n        push_at P, q_ridx, undefined while P.length < arity\n        ### ATP, `P` holds `arity` arguments and there *is* a POD in CFG position (which we assume to\n        represent CFG so we can make a copy, filling in template values): ###\n        Q = set_at P, q_ridx, gnd.pod.create cfg.template, P.at q_ridx\n      else\n        P.push undefined while P.length < arity\n        ### ATP, `P` holds `arity` arguments and there *may be* an `undefined` in CFG position (which we\n        assume is replaceable by a newly created CFG instance with template values): ###\n        if ( P.at q_ridx ) is undefined\n          Q = set_at P, q_ridx, gnd.pod.create cfg.template\n        else\n          throw new Argument_type_error \"Ωnfa___6 expected an optional POD at position #{q_ridx}, got #{rpr P.at q_ridx}\"\n      #.....................................................................................................\n      ### Harmonize values: ###\n      for name, idx in names\n        continue if idx is q_idx ### skip over CFG object's (`Q`'s') position in P ###\n        if ( P[ idx   ] is undefined )  then  P[ idx  ] = Q[ name ]\n        else                                  Q[ name ] = P[ idx  ] ### pos.arg:s other than undef. take precedence ###\n        if ( Q[ name  ] is undefined )  then  Q[ name ] = P[ idx  ] ### ensure all sign. names are set in CFG POD `Q` ###\n      #.....................................................................................................\n      return validate fn.call @, P...\n\n  #---------------------------------------------------------------------------------------------------------\n  get_signature: ( fn ) ->\n    this_cfg_q_name = 'cfg' ### TAINT pick from @cfg ###\n    ### thx to https://github.com/sindresorhus/identifier-regex ###\n    jsid_re   = /// ^ [ $ _ \\p{ID_Start} ] [ $ _ \\u200C \\u200D \\p{ID_Continue} ]* $ ///sv\n    #.......................................................................................................\n    signature = fn.toString()\n    signature = signature.replace /// \\s+ ///svg, ''\n    signature = signature.replace /// ^ [^ \\( ]* \\( (?<parens> [^ \\) ]* ) \\) .* $ ///svg, '$<parens>'\n    names     = signature.split ','\n    #.......................................................................................................\n    q_idx     = null\n    for name, idx in names\n      if jsid_re.test name\n        q_idx = idx if name is this_cfg_q_name\n      else\n        throw new Signature_disposition_Error \"Ωnfa___7 parameter disposition not compliant: #{rpr name} in #{rpr signature}\"\n    #.......................................................................................................\n    unless q_idx?\n      names_rpr = names.join ', '\n      throw new Signature_naming_Error \"Ωnfa___8 parameter naming not compliant: no parameter named #{rpr this_cfg_q_name}, got #{rpr names_rpr}\"\n    #.......................................................................................................\n    switch q_idx\n      when names.length - 2 then q_ridx = -2\n      when names.length - 1 then q_ridx = -1\n      else\n        throw new Signature_cfg_position_error \"Ωnfa___9 parameter ordering not compliant: expected #{rpr this_cfg_q_name} to come last or next-to-last, found it at index #{q_idx} of #{names.length} parameters\"\n    #.......................................................................................................\n    return { names, q_idx, q_ridx, }\n\n\n#===========================================================================================================\nnormalizer                = new Normalize_function_arguments()\n{ nfa\n  get_signature         } = normalizer\n\n#===========================================================================================================\nmodule.exports = { nfa, get_signature, Normalize_function_arguments, Template, internals, }\n\n"],"names":[],"version":3,"file":"main.js.map"}