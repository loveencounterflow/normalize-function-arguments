{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n#===========================================================================================================\nH                         = require './helpers'\n{ Template\n  gnd\n  hide\n  # get_instance_methods\n  bind_instance_methods\n  nameit\n  debug\n  warn\n  help\n  rpr                   } = H\n# E                         = require './errors'\n# optional                  = Symbol 'optional'\n\n\n#=========================================================================================================\nclass Nfa_error                           extends Error\nclass Arity_error                         extends Nfa_error\nclass Named_arity_error                   extends Arity_error\nclass Runtime_arity_error                 extends Arity_error\nclass Positional_arity_error              extends Arity_error\nclass Not_implemented_error               extends Nfa_error\nclass Value_mismatch_error                extends Nfa_error\nclass Signature_error                     extends Nfa_error\nclass Signature_disposition_Error         extends Signature_error\nclass Signature_naming_Error              extends Arity_error\nclass Signature_missing_parameter_Error   extends Arity_error\nclass Type_error                          extends Nfa_error\n# class Npo_type_error                      extends Type_error\n\n\n#===========================================================================================================\ninternals = new class Internals then constructor: ->\n  @pod_prototypes = H.pod_prototypes\n  @gnd            = gnd\n  return undefined\n\n\n#===========================================================================================================\nclass Normalize_function_arguments\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( cfg = null ) ->\n    if cfg?\n      throw new Not_implemented_error \"Ωnfa___1 configuration not implemented\"\n    bind_instance_methods @\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  nfa: ( cfg, fn ) ->                                                   ### Normalize Function Arguments ###\n    switch arity = arguments.length\n      when 1 then [ cfg, fn, ] = [ {}, cfg, ]\n      when 2 then null\n      else throw new Runtime_arity_error \"Ωnfa___2 expected 1 or 2 arguments, got #{arity}\"\n    #.......................................................................................................\n    ### TAINT do this in `gnd` ###\n    unless gnd.pod.isa cfg      then throw new Type_error \"Ωnfa___3 expected a POD, got #{rpr cfg}\"\n    unless gnd.function.isa fn  then throw new Type_error \"Ωnfa___4 expected a function, got #{rpr cfg}\"\n    #.......................................................................................................\n    cfg               = { gnd.nfa_cfg.template..., cfg..., }\n    cfg.template      = ( new Template cfg.template ) if cfg.template?\n    #.......................................................................................................\n    { names\n      q_idx }         = @get_signature fn\n    arity             = names.length\n    p_names           = names[ ... names.length - 1 ]\n    p_arity           = p_names.length\n    #.......................................................................................................\n    return ( P... ) ->\n      #.....................................................................................................\n      if gnd.pod.isa P.at -1  then  Q = gnd.pod.create cfg.template, P.pop()\n      else                          Q = gnd.pod.create cfg.template\n      #.....................................................................................................\n      if P.length > p_arity\n        throw new Positional_arity_error \"Ωnfa___5 expected up to #{p_arity} positional arguments, got #{P.length}\"\n      #.....................................................................................................\n      P.push undefined while P.length < p_arity\n      #.....................................................................................................\n      ### Harmonize values: ###\n      for name, idx in p_names\n        if ( P[ idx ] isnt undefined ) then Q[ name ] = P[ idx  ]\n        else                                P[ idx  ] = Q[ name ]\n      #.....................................................................................................\n      return fn.call @, P..., Q\n\n  #---------------------------------------------------------------------------------------------------------\n  get_signature: ( fn ) ->\n    this_cfg_q_name = 'cfg' ### TAINT pick from @cfg ###\n    ### thx to https://github.com/sindresorhus/identifier-regex ###\n    jsid_re   = /// ^ [ $ _ \\p{ID_Start} ] [ $ _ \\u200C \\u200D \\p{ID_Continue} ]* $ ///sv\n    #.......................................................................................................\n    signature = fn.toString()\n    signature = signature.replace /// \\s+ ///svg, ''\n    signature = signature.replace /// ^ [^ \\( ]* \\( (?<parens> [^ \\) ]* ) \\) .* $ ///svg, '$<parens>'\n    names     = signature.split ','\n    #.......................................................................................................\n    q_idx     = null\n    for name, idx in names\n      if jsid_re.test name\n        q_idx = idx\n      else\n        throw new Signature_disposition_Error \"Ωnfa___6 parameter disposition not compliant: #{rpr name} in #{rpr signature}\"\n    #.......................................................................................................\n    unless ( last_name = names.at -1 ) is this_cfg_q_name\n      throw new Signature_naming_Error \"Ωnfa___7 parameter naming not compliant: last parameter must be named #{rpr this_cfg_q_name}, got #{rpr last_name}\"\n    #.......................................................................................................\n    if q_idx isnt names.length - 1\n      throw new Error \"Ωnfa___8 expected #{rpr this_cfg_q_name} to come last, found it at index #{q_idx} of #{names.length} parameters\"\n    #.......................................................................................................\n    return { names, q_idx, }\n\n\n#===========================================================================================================\nnormalizer                = new Normalize_function_arguments()\n{ nfa\n  get_signature         } = normalizer\n\n#===========================================================================================================\nmodule.exports = { nfa, get_signature, Normalize_function_arguments, Template, internals, }\n\n"
  ]
}