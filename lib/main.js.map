{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n#===========================================================================================================\nH                         = require './helpers'\n{ Template\n  gnd\n  hide\n  # get_instance_methods\n  bind_instance_methods\n  nameit\n  debug\n  warn\n  help\n  rpr                   } = H\n# E                         = require './errors'\n# optional                  = Symbol 'optional'\n\n\n#=========================================================================================================\nclass Nfa_error                           extends Error\nclass Arity_error                         extends Nfa_error\nclass Named_arity_error                   extends Arity_error\nclass Runtime_arity_error                 extends Arity_error\nclass Positional_arity_error              extends Arity_error\nclass Not_implemented_error               extends Nfa_error\nclass Value_mismatch_error                extends Nfa_error\nclass Signature_error                     extends Nfa_error\nclass Signature_disposition_Error         extends Signature_error\nclass Signature_naming_Error              extends Arity_error\nclass Signature_missing_parameter_Error   extends Arity_error\nclass Type_error                          extends Nfa_error\n# class Npo_type_error                      extends Type_error\n\n\n#===========================================================================================================\ninternals = new class Internals then constructor: ->\n  @pod_prototypes = H.pod_prototypes\n  @gnd            = gnd\n  return undefined\n\n\n#===========================================================================================================\nclass Normalize_function_arguments\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( cfg = null ) ->\n    if cfg?\n      throw new Not_implemented_error \"Ωnfa___1 configuration not implemented\"\n    bind_instance_methods @\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  nfa: ( cfg, fn ) ->                                                   ### Normalize Function Arguments ###\n    switch arity = arguments.length\n      when 1 then [ cfg, fn, ] = [ {}, cfg, ]\n      when 2 then null\n      else throw new Runtime_arity_error \"Ωnfa___2 expected 1 or 2 arguments, got #{arity}\"\n    #.......................................................................................................\n    ### TAINT do this in `gnd` ###\n    unless gnd.pod.isa cfg      then throw new Type_error \"Ωnfa___3 expected a POD, got #{rpr cfg}\"\n    unless gnd.function.isa fn  then throw new Type_error \"Ωnfa___4 expected a function, got #{rpr cfg}\"\n    #.......................................................................................................\n    cfg               = { gnd.nfa_cfg.template..., cfg..., }\n    cfg.template      = ( new Template cfg.template ) if cfg.template?\n    #.......................................................................................................\n    signature         = @get_signature fn\n    # q_name            = 'cfg'\n    names             = Object.keys signature\n    arity             = names.length\n    p_names           = names[ ... names.length - 1 ]\n    p_arity           = p_names.length\n    #.......................................................................................................\n    return ( P... ) ->\n      #.....................................................................................................\n      if gnd.pod.isa P.at -1  then  Q = gnd.pod.create cfg.template, P.pop()\n      else                          Q = gnd.pod.create cfg.template\n      #.....................................................................................................\n      if P.length > p_arity\n        throw new Positional_arity_error \"Ωnfa__10 expected up to #{p_arity} positional arguments, got #{P.length}\"\n      #.....................................................................................................\n      P.push undefined while P.length < p_arity\n      #.....................................................................................................\n      ### Harmonize values: ###\n      for name, idx in p_names\n        if ( P[ idx ] isnt undefined ) then Q[ name ] = P[ idx  ]\n        else                                P[ idx  ] = Q[ name ]\n      #.....................................................................................................\n      return fn.call @, P..., Q\n\n  #---------------------------------------------------------------------------------------------------------\n  get_signature: ( fn ) ->\n    q_name  = 'cfg'\n    ### thx to https://github.com/sindresorhus/identifier-regex ###\n    jsid_re = /// ^ [ $ _ \\p{ID_Start} ] [ $ _ \\u200C \\u200D \\p{ID_Continue} ]* $ ///sv\n    R       = {}\n    body    = fn.toString()\n    kernel  = body.replace /// ^ [^ \\( ]* \\( \\s* ( [^ \\) ]* ) \\s* \\) .* $ ///sv, '$1'\n    if kernel is ''\n     throw new Signature_missing_parameter_Error \"Ωnfa__13 not compliant: missing parameter #{rpr q_name}\"\n    parts   = kernel.split /// , \\s* ///sv\n    parts   = ( part.trim() for part in parts )\n    names   = []\n    #.......................................................................................................\n    for part in parts\n      unless ( part.match jsid_re )?\n        throw new Signature_disposition_Error \"Ωnfa__14 parameter disposition not compliant: #{rpr part} in #{rpr kernel}\"\n      disposition   = 'bare'\n      name          = part\n      #.....................................................................................................\n      R[ name ] = disposition\n      names.push name\n    #.......................................................................................................\n    unless ( last_name = names.at -1 ) is q_name\n      throw new Signature_naming_Error \"Ωnfa__15 parameter naming not compliant: last parameter must be named #{rpr q_name}, got #{rpr last_name}\"\n    # delete R[ q_name ]\n    #.......................................................................................................\n    return R\n\n\n#===========================================================================================================\nnormalizer                = new Normalize_function_arguments()\n{ nfa\n  get_signature }         = normalizer\n\n#===========================================================================================================\nmodule.exports = { nfa, get_signature, Normalize_function_arguments, Template, internals, }\n\n"
  ]
}